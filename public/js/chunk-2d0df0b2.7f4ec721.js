(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0df0b2"],{"87da":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-data-table",{staticClass:"elevation-1 ma-2",attrs:{headers:t.headers,items:t.desserts,search:t.busca,"sort-by":"calories","footer-props":{"items-per-page-options":[8,10,12,14]}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"5"}},[a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":"",outlined:""},model:{value:t.busca,callback:function(e){t.busca=e},expression:"busca"}})],1)],1)],1),a("snackbar",{attrs:{snackbar:t.snackbar.state,textoSnackbar:t.snackbar.text,color:t.snackbar.color},on:{closeSnackbar:t.closeSnackbar}}),a("div",{staticClass:"flex-grow-1"}),a("novo-lts",{attrs:{dialogImportar:t.novoLts},on:{close:t.closeNovo}}),a("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on;return[a("v-btn",{staticClass:"mb-2",attrs:{color:"primary"},on:{click:t.nova}},[t._v("Nova")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}})],1)]},proxy:!0},{key:"item.action",fn:function(e){var o=e.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editarPessoa(o)}}},[t._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},[t._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])]},proxy:!0}])})},i=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[t._v("Novo LTS")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[t.avisoArquivoVaziu?a("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[t._v(" Deve ser selecionado um arquivo PDF ")]):t._e()],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-autocomplete",{attrs:{items:t.pacientes,"hide-no-data":"","hide-selected":"","item-text":"nome","item-value":"id",label:"Paciente",rules:[function(t){return!!t||"Obrigatório prencher o paciente!"}],outlined:""},model:{value:t.idPaciente,callback:function(e){t.idPaciente=e},expression:"idPaciente"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-autocomplete",{attrs:{items:t.tiposDocumentos,label:"Tipo Documento",rules:[function(t){return!!t||"Obrigatório prencher o tipo documento!"}],outlined:""},model:{value:t.tipoDocumento,callback:function(e){t.tipoDocumento=e},expression:"tipoDocumento"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-file-input",{attrs:{color:"deep-purple accent-4",counter:"",label:"Arquivo CSV","prepend-icon":"mdi-package-up",multiple:"",outlined:"","show-size":1e3},on:{change:t.setPdfBase64},scopedSlots:t._u([{key:"selection",fn:function(e){var o=e.index,i=e.text;return[o<2?a("v-chip",{attrs:{color:"deep-purple accent-4",dark:"",label:"",small:""}},[t._v(" "+t._s(i)+" ")]):2===o?a("span",{staticClass:"overline grey--text text--darken-3 mx-2"},[t._v(" +"+t._s(t.foto.length-2)+" Arquivo ")]):t._e()]}}])})],1)],1)],1)],1),a("v-card-actions",[a("div",{staticClass:"flex-grow-1"}),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancelar")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.salvar}},[t._v("Salvar")])],1)],1)],1)},n=[],r={data:()=>({arquivo:null,idPaciente:null,tipoDocumento:null,documento:null,pacientes:[],tiposDocumentos:["Atestado","Licença Tratamento Saúde"],avisoArquivoVaziu:""}),created(){this.initialize()},computed:{dialog:{get(){return this.dialogImportar},set(){this.$emit("close",!1)}}},watch:{arquivo(t){null!=t&&(this.avisoArquivoVaziu=!1)}},props:{dialogImportar:{type:Boolean}},methods:{initialize(){this.axios.get("https://prontuario6bbm.herokuapp.com/api/pessoa").then(t=>{this.pacientes=t.data})},close(){this.$emit("close",!1)},salvar(){var t={paciente:this.paciente,tipoDocumento:this.tipoDocumento,documento:this.documento};this.axios.post("https://prontuario6bbm.herokuapp.com/api/lts",t).then(t=>{console.log(t.data)})},setPdfBase64(t){const e=t[0];if(e){var a=e.name.split(".").pop().toLowerCase();if("pdf"==a||"png"==a||"jpeg"==a){if(console.log(a),"function"===typeof FileReader){const t=new FileReader;t.onload=t=>{console.log(t.target.result),this.documento=t.target.result},t.readAsDataURL(e)}"function"!==typeof FileReader&&alert("Sorry, FileReader API not supported")}}}}},l=r,c=a("2877"),d=a("6544"),u=a.n(d),p=a("0798"),v=a("c6a6"),m=a("8336"),h=a("b0af"),b=a("99d9"),f=a("cc20"),g=a("62ad"),k=a("a523"),x=a("169a"),V=a("23a7"),w=a("0fd9"),_=Object(c["a"])(l,s,n,!1,null,null,null),C=_.exports;u()(_,{VAlert:p["a"],VAutocomplete:v["a"],VBtn:m["a"],VCard:h["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VChip:f["a"],VCol:g["a"],VContainer:k["a"],VDialog:x["a"],VFileInput:V["a"],VRow:w["a"]});var y={components:{"novo-lts":C},data:()=>({busca:"",desserts:[],dialog:!1,dialogNovo:!1,dialogEditar:!1,snackbar:{text:"",color:"",state:!1},headers:[{text:"Paciente",align:"left",sortable:!0,value:"paciente"},{text:"Tipo Documento",value:"tipoDocumento"},{text:"Ações",value:"action",sortable:!1}],pagination:{rowsPerPage:20},rowsPerPageItems:[8,12,15],novoLts:!1}),created(){this.initialize()},methods:{initialize(){this.axios.get("https://prontuario6bbm.herokuapp.com/api/lts").then(t=>{this.desserts=t.data,this.desserts=t.data})},editarPessoa(t){this.pessoa=Object.assign({},t),this.dialogEditar=!0},deleteItem(t){this.axios.delete("https://prontuario6bbm.herokuapp.com/api/lts/"+t.id+"/delete").then(t=>{t.data&&(this.snackbar.color="success",this.snackbar.text="Pessoa apagada com sucesso!",this.initialize()),t.data||(this.snackbar.color="error",this.snackbar.text="Ocorreu um erro ao tentar apagar o registro!"),this.snackbar.state=!0})},nova(){this.novoLts=!0},closeEditar(t){this.dialogEditar=!1,this.snackbar.text=t.text,this.snackbar.color=t.color,this.snackbar.state=t.state,this.initialize()},closeNovo(){this.novoLts=!1,this.initialize()},closeSnackbar(){this.snackbar=!1}}},D=y,P=a("8fea"),z=a("132d"),A=a("8654"),S=a("71d9"),I=Object(c["a"])(D,o,i,!1,null,null,null);e["default"]=I.exports;u()(I,{VBtn:m["a"],VCol:g["a"],VContainer:k["a"],VDataTable:P["a"],VDialog:x["a"],VIcon:z["a"],VRow:w["a"],VTextField:A["a"],VToolbar:S["a"]})}}]);
//# sourceMappingURL=chunk-2d0df0b2.7f4ec721.js.map